<!DOCTYPE html>
<html> 
<head> 
	<title>Create Image Gallery From The Contents Of A Websites Folder</title> 
	<link rel="stylesheet" type="text/css" href="style.css" />
</head> 
<body>
	<div class="intro"> 

		<h2>Gallery</h2> 

		<div id="image-gallery">
			<img id="current-image" src="images/image0001.jpg" alt = "Image Gallery Image1">
			<span id="overlay" class="loading-spinner"></span>
		</div>

	</div>


 	<div class="grid-container"> 
		<div id="image-thumbs"></div>
	</div>


	<script>
		function pad(n, width, z) {
		  z = z || '0';
		  n = n + '';
		  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
		}

		var imageThumbs = document.getElementById("image-thumbs");
		var currentImage = document.getElementById("current-image");

		let i = 1;

		var tempImg = new Image();
		tempImg.onload = function(){
		  appendImage();
		}

		var tryLoadImage = function(){
			tempImg.src = "thumbnails/image" + pad(i, 4) + ".jpg";
		}

		var appendImage = function(){
			var thumb = document.createElement("img");
			thumb.src = tempImg.src;
 			thumb.alt = "Image Gallery Image" + pad(i, 4);
 			thumb.classList.add("thumb");
			imageThumbs.appendChild(thumb);
			thumb.addEventListener("click", function() {

					document.getElementsByClassName("loading-spinner")[0].style.visibility = "visible";
					currentImage.src = this.src.replace("thumbnails/", "images/");


					function checkLoaded(){
						var finishedLoading = document.getElementById("current-image").complete;

						if (finishedLoading) { 
							document.getElementsByClassName("loading-spinner")[0].style.visibility = "hidden"; 
						}

						setTimeout(checkLoaded, 1000);
					}

					checkLoaded();

					clearTimeout(checkLoaded);
					window.scrollTo({ top: 0, behavior: 'smooth' });

				} );

			tryLoadImage(i++)
		}
		// let n = Math.floor(Math.random() * 10) + 1;
		tryLoadImage(i);
	</script>
</body>
</html>